(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1394],{3801:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Admin/routes/editArticle",function(){return n(4088)}])},140:function(e,t){"use strict";t.Z={src:"/_next/static/media/loadingshop.3e55c8c5.gif",height:600,width:900}},3016:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(5893),a=n(7294);function i(e){var t=e.setProperty,i=e.data,s=(0,a.useRef)(),c=(0,a.useState)(!1),o=c[0],l=c[1],u=s.current||{},d=u.CKEditor,h=u.ClassicEditor;u.ImageInsert;return(0,a.useEffect)((function(){s.current={CKEditor:n(2757).CKEditor,ClassicEditor:n(5234)},l(!0)}),[]),o?(0,r.jsx)(d,{editor:h,class:".ck.ck-editor__editable_inline ",data:i,onChange:function(e,n){var r=n.getData();t(r)},config:{ckfinder:{uploadUrl:"http://dreamweb.runflare.run/upload",withCredentials:!0,headers:{"X-CSRF-TOKEN":"CSFR-Token",Authorization:"Bearer <JSON Web Token>"}}}}):(0,r.jsx)("div",{children:"Editor loading"})}},4088:function(e,t,n){"use strict";n.r(t);var r=n(4051),a=n.n(r),i=n(5893),s=n(7294),c=n(9669),o=n.n(c),l=n(3016),u=n(140),d=n(5675);function h(e,t,n,r,a,i,s){try{var c=e[i](s),o=c.value}catch(l){return void n(l)}c.done?t(o):Promise.resolve(o).then(r,a)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){h(i,r,a,s,c,"next",e)}function c(e){h(i,r,a,s,c,"throw",e)}s(void 0)}))}}t.default=function(){var e=(0,s.useState)(""),t=e[0],n=e[1],r=(0,s.useState)([]),c=(r[0],r[1]),h=(0,s.useState)(""),f=h[0],x=h[1],g=(0,s.useState)(""),m=g[0],v=g[1],j=(0,s.useState)(!1),w=j[0],b=j[1],k=(0,s.useState)([]),y=k[0],C=k[1],_=(0,s.useState)(""),E=_[0],S=_[1],N=(0,s.useState)(!1),T=N[0],R=N[1],M=(0,s.useState)(!1),P=M[0],D=M[1],A=(0,s.useState)(null),K=A[0],O=A[1],F=function(){var e=p(a().mark((function e(n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),b(!0),r=new FormData,e.prev=3,r.append("title",t),r.append("image",f),r.append("id",P),r.append("info",m),e.next=10,o().put("http://dreamweb.runflare.run/adminRoute/ArticleUpdate",r,{withCredentials:!0}).then((function(e){e.data.errMessage&&(alert(e.data.errMessage),setErr(e.data.errMessage),b(!1)),alert(e.data.Message),setMessage(e.data.Message),b(!1),R(!1)}));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),b(!1);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=p(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().get("http://dreamweb.runflare.run/allRoutes/articles",{withCredentials:!0}).then((function(e){C(e.data.findPost)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){L()}),[]);var X=function(){var e=p(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.files[0],x(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=p(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={image:K.image},b(!0),e.next=5,o().put("http://dreamweb.runflare.run/adminRoute/delete/articles/".concat(K._id," "),n,{withCredentials:!0}).then((function(e){alert(e.data.Message),b(!1),O(null),R("")}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,i.jsxs)("div",{className:"products",children:[K&&(0,i.jsx)("div",{onClick:function(){return O(null)},id:"backDrop",children:"hello"}),K&&(0,i.jsxs)("div",{className:"secc-comment",children:[(0,i.jsx)("img",{src:"/uploads/warning.png",alt:""}),(0,i.jsx)("h1",{children:"\u0622\u06cc\u0627 \u0627\u06cc\u0646 \u067e\u0633\u062a \u062d\u0630\u0641 \u0634\u0648\u062f \u061f"}),(0,i.jsx)("button",{style:{background:"#fe1919"},onClick:z,children:" \u062d\u0630\u0641 \u067e\u0633\u062a"})]}),!T&&(0,i.jsxs)("form",{style:{height:"100%",marginTop:"-10px"},encType:"multipart/form-data",children:[(0,i.jsx)("div",{style:{height:"max-content",width:"90%",background:"#3f51b5",padding:"10px",borderRadius:"10px",color:"white"},children:"\u0648\u06cc\u0631\u0627\u06cc\u0634 \u0645\u0642\u0627\u0644\u0627\u062a"}),(0,i.jsx)("input",{style:{marginTop:"10px"},placeholder:"\u062c\u0633\u062a\u062c\u0648...",onChange:function(e){return S(e.target.value)}}),0===y.length&&(0,i.jsx)("div",{style:{width:"100%",height:"450px",position:"relative",margin:"auto"},children:(0,i.jsx)(d.default,{src:u.Z,layout:"fill",alt:""})}),(0,i.jsx)("div",{className:"tableEdit-holder",children:y.length>0&&(0,i.jsxs)("table",{className:"edit-table",children:[(0,i.jsxs)("thead",{children:[(0,i.jsx)("th",{style:{padding:"20px",background:"#673ab7"},children:(0,i.jsx)("a",{href:"#",children:"\u062a\u0635\u0648\u06cc\u0631"})}),(0,i.jsx)("th",{style:{padding:"20px",background:"#673ab7"},children:(0,i.jsx)("a",{href:"#",children:" \u0646\u0627\u0645 "})}),(0,i.jsx)("th",{style:{padding:"20px",width:"20%",background:"#673ab7"},children:(0,i.jsx)("a",{href:"#",children:"\u062f\u06cc\u062f\u06af\u0627\u0647"})})]}),(0,i.jsx)("tbody",{children:y.length>0&&y.filter((function(e){return e.title.toLowerCase().includes(E.toLocaleLowerCase())})).map((function(e){return(0,i.jsxs)("tr",{onClick:function(){R(e),n(e.title),c(e.des),v(e.info),D(e._id)},className:"tr-all",children:[(0,i.jsx)("td",{children:(0,i.jsx)("img",{src:"/uploads/".concat(e.image),alt:""})}),(0,i.jsx)("td",{children:(0,i.jsx)("a",{children:e.title})}),(0,i.jsx)("td",{children:(0,i.jsx)("a",{children:e.comments.length})})]})}))}),(0,i.jsx)("tfoot",{})]})})]}),T.title&&(0,i.jsxs)("form",{style:{height:"100%",marginTop:"-10px"},encType:"multipart/form-data",children:[(0,i.jsxs)("div",{style:{width:"90%",background:"#3f51b5",padding:"10px",borderRadius:"10px",color:"white",position:"relative"},children:["\u0648\u06cc\u0631\u0627\u06cc\u0634 \u0645\u0642\u0627\u0644\u0627\u062a",(0,i.jsx)("button",{disabled:w,onClick:function(e){e.preventDefault(),O(T)},style:{top:"-17px",padding:"10px",position:"absolute",left:"3px",fontSize:"12px",width:"max-content",height:"max-content",background:"red"},children:"\u062d\u0630\u0641 \u0645\u0642\u0627\u0644\u0647"})]}),(0,i.jsx)("input",{placeholder:"title",value:t,onChange:function(e){return n(e.target.value)}}),(0,i.jsx)("input",{placeholder:"\u062a\u0635\u0648\u06cc\u0631",type:"file",filename:"image",onChange:X}),(0,i.jsx)(l.default,{setProperty:v,data:m}),(0,i.jsxs)("button",{disabled:w,onClick:F,children:[w&&(0,i.jsx)("div",{style:{height:"30px",width:"30px",top:"25%"},className:"loading-spinner"}),"\u062a\u0627\u06cc\u06cc\u062f \u0648\u06cc\u0631\u0627\u06cc\u0634"]})]})]})}}},function(e){e.O(0,[2554,5675,2757,9774,2888,179],(function(){return t=3801,e(e.s=t);var t}));var t=e.O();_N_E=t}]);